<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#306AFF">
  <title>Shop Collector</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icons/pwa-icon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="icons/pwa-icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="logo"></div>
      <h1>Shop Collector</h1>
      <button id="installBtn" class="install-btn" hidden>Install App</button>
    </header>

    <main class="card slide-in">
      <form id="shopForm" autocomplete="on">
        <div class="field">
          <label for="shopName">Shop Name <span class="req">*</span></label>
          <input id="shopName" name="shopName" type="text" placeholder="e.g., Sunshine Mart" required maxlength="120">
        </div>

        <div class="field">
          <label for="remark">Remark</label>
          <textarea id="remark" name="remark" rows="3" placeholder="Any notes about the shop..."></textarea>
        </div>

        <div class="field">
          <label>Shop Popularity</label>
          <div id="stars" class="stars" role="radiogroup" aria-label="Shop Popularity">
            <button type="button" class="star" data-value="1" aria-label="1 star" title="1 star">★</button>
            <button type="button" class="star" data-value="2" aria-label="2 stars" title="2 stars">★</button>
            <button type="button" class="star" data-value="3" aria-label="3 stars" title="3 stars">★</button>
            <button type="button" class="star" data-value="4" aria-label="4 stars" title="4 stars">★</button>
            <button type="button" class="star" data-value="5" aria-label="5 stars" title="5 stars">★</button>
          </div>
          <input type="hidden" id="popularity" name="popularity" value="3">
        </div>

        <div class="field">
          <label for="photo">Photo <span class="req">*</span></label>
          <input id="photo" name="photo" type="file" accept="image/*" capture="environment" required>
          <div id="photoPreview" class="photo-preview" aria-live="polite"></div>
          <small class="hint">Tip: Use your phone camera. Landscape photos look best.</small>
        </div>

        <div class="field">
          <label>GPS Location</label>
          <div class="loc-row">
            <div class="loc-badge" id="locBadge">Locating…</div>
            <button type="button" id="refreshLoc" class="ghost-btn">Refresh</button>
          </div>
          <input type="hidden" id="latitude" name="latitude">
          <input type="hidden" id="longitude" name="longitude">
          <input type="hidden" id="accuracy" name="accuracy">
          <small class="hint">Location is captured automatically when the app opens.</small>
        </div>

        <div class="actions">
          <button id="submitBtn" class="primary-btn" type="submit">
            <span class="btn-text">Submit</span>
            <span class="btn-spinner" aria-hidden="true"></span>
          </button>
        </div>
      </form>
    </main>

    <footer class="app-footer">
      <span>Made for quick, clean data collection ✨</span>
    </footer>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>
  </div>

  <script src="app.js"></script>
</body>
</html>
